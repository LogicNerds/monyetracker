<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDK - Money Tracker</title>
    <style>
        :root {
            --primary-start: #2c5f7a;
            --primary-end: #1a3a4a;
            --accent-primary: #0d9488;
            --accent-secondary: #0f766e;
            --accent-bg: #f0fdfa;
            --balance-start: #0d9488;
            --balance-end: #0f766e;
            --button-deposit-start: #0d9488;
            --button-deposit-end: #0f766e;
            --button-withdraw-start: #f59e0b;
            --button-withdraw-end: #d97706;
            --button-transfer-start: #6366f1;
            --button-transfer-end: #4f46e5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
            min-height: 100vh;
            padding: 0;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.2);
        }

        /* Login Screen */
        .login-screen {
            padding: 40px 20px;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
        }

        .login-screen h1 {
            color: white;
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .login-screen p {
            color: rgba(255,255,255,0.9);
            margin-bottom: 40px;
            font-size: 0.95em;
            font-style: italic;
            line-height: 1.4;
            max-width: 300px;
        }

        .google-signin-btn {
            background: white;
            color: #333;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.2s;
            margin: 0 auto;
        }

        .google-signin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .google-icon {
            width: 24px;
            height: 24px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
            color: white;
            padding: 25px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-left h1 {
            font-size: 2em;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: background 0.2s;
        }

        .theme-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .header-left h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .header-left p {
            font-size: 0.85em;
            opacity: 0.9;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid white;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.2s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Main Content */
        .main-content {
            padding: 20px 20px 80px 20px;
        }

        .total-balance {
            background: linear-gradient(135deg, var(--balance-start) 0%, var(--balance-end) 100%);
            border-radius: 16px;
            padding: 30px;
            color: white;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(13, 148, 136, 0.2);
        }

        .total-balance h2 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .total-balance .amount {
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Accounts */
        .accounts-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .account-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .account-card:hover {
            border-color: var(--accent-primary);
            box-shadow: 0 3px 10px rgba(13, 148, 136, 0.2);
            transform: translateY(-2px);
        }

        .account-card.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .account-info h4 {
            color: #333;
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .account-actions {
            display: flex;
            gap: 5px;
        }

        .icon-btn {
            background: none;
            border: none;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            opacity: 0.6;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        .delete-btn {
            color: #dc2626;
        }

        .goal-btn {
            color: var(--accent-primary);
        }

        .account-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .goal-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            color: #666;
            min-width: 0;
        }

        .goal-display .goal-emoji {
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .goal-display .goal-amount {
            font-weight: 600;
            white-space: nowrap;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            flex: 1;
            overflow: hidden;
            min-width: 60px;
        }

        .progress-fill {
            background: linear-gradient(90deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .account-balance {
            color: var(--accent-primary);
            font-size: 1.5em;
            font-weight: 700;
        }

        .account-balance.negative {
            color: #dc2626;
        }

        .add-account-btn {
            width: 100%;
            padding: 15px;
            background: white;
            border: 2px dashed var(--accent-primary);
            color: var(--accent-primary);
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .add-account-btn:hover {
            background: var(--accent-bg);
        }

        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 25px 0;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
        }

        .action-btn.deposit {
            background: linear-gradient(135deg, var(--button-deposit-start) 0%, var(--button-deposit-end) 100%);
        }

        .action-btn.withdraw {
            background: linear-gradient(135deg, var(--button-withdraw-start) 0%, var(--button-withdraw-end) 100%);
        }

        .action-btn.transfer {
            background: linear-gradient(135deg, var(--button-transfer-start) 0%, var(--button-transfer-end) 100%);
            color: white;
        }

        body[data-theme="monochrome"] .action-btn.transfer {
            background: white;
            border: 2px solid #ef4444;
            color: #ef4444;
        }

        body[data-theme="monochrome"] .action-btn.transfer:hover {
            background: #fef2f2;
        }

        /* Classic Black & White Theme Overrides */
        body[data-theme="classic"] {
            background: white;
        }

        body[data-theme="classic"] .container {
            background: white;
        }

        body[data-theme="classic"] .main-content {
            background: white;
        }

        body[data-theme="classic"] .account-card {
            background: white;
            border: 2px solid #000000;
        }

        body[data-theme="classic"] .account-card:hover {
            border-color: #000000;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
        }

        body[data-theme="classic"] .account-card.selected {
            border-color: #000000;
            background: #f5f5f5;
        }

        body[data-theme="classic"] .account-balance {
            color: #000000;
        }

        body[data-theme="classic"] .add-account-btn {
            background: white;
            border: 2px dashed #000000;
            color: #000000;
        }

        body[data-theme="classic"] .add-account-btn:hover {
            background: #f5f5f5;
        }

        body[data-theme="classic"] .action-btn {
            background: #000000;
            color: white;
            border: 2px solid #000000;
        }

        body[data-theme="classic"] .action-btn:hover {
            background: #333333;
        }

        body[data-theme="classic"] .action-btn:disabled {
            background: #e5e5e5;
            border-color: #e5e5e5;
            color: #999999;
        }

        body[data-theme="classic"] .transaction-item {
            background: white;
            border: 1px solid #000000;
        }

        body[data-theme="classic"] .transaction-amount.positive,
        body[data-theme="classic"] .transaction-amount.negative {
            color: #000000;
        }

        body[data-theme="classic"] .modal-btn.primary {
            background: #000000;
            color: white;
        }

        body[data-theme="classic"] .modal-btn.primary:hover {
            background: #333333;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        body[data-theme="classic"] .emoji-btn:hover,
        body[data-theme="classic"] .emoji-btn.selected {
            border-color: #000000;
            background: #f5f5f5;
        }

        body[data-theme="classic"] .form-group input:focus,
        body[data-theme="classic"] .form-group select:focus {
            border-color: #000000;
        }

        body[data-theme="classic"] .progress-fill {
            background: #000000;
        }

        body[data-theme="classic"] .logout-btn,
        body[data-theme="classic"] .theme-btn {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.2);
            color: white;
        }

        body[data-theme="classic"] .logout-btn:hover,
        body[data-theme="classic"] .theme-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Transactions */
        .transactions-section {
            margin-top: 30px;
        }

        .transactions-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .transaction-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-type {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 3px;
        }

        .transaction-desc {
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }

        .transaction-date {
            font-size: 0.8em;
            color: #999;
        }

        .transaction-amount {
            font-size: 1.2em;
            font-weight: 700;
        }

        .transaction-amount.positive {
            color: var(--accent-primary);
        }

        .transaction-amount.negative {
            color: #f59e0b;
        }

        .no-transactions {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-style: italic;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px 20px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        /* Emoji Picker */
        .emoji-picker {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin: 10px 0;
        }

        .emoji-btn {
            font-size: 1.8em;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .emoji-btn:hover {
            transform: scale(1.1);
            border-color: var(--accent-primary);
        }

        .emoji-btn.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
            transform: scale(1.1);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
        }

        .modal-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 148, 136, 0.4);
        }

        .modal-btn.secondary {
            background: #f0f0f0;
            color: #666;
        }

        .modal-btn.secondary:hover {
            background: #e0e0e0;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #333;
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 0.85em;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .footer a {
            color: #a8edea;
            text-decoration: none;
            cursor: pointer;
            margin-left: 5px;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Disclaimer Drawer */
        .disclaimer-drawer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            z-index: 1001;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }

        .disclaimer-drawer.open {
            max-height: 80vh;
            overflow-y: auto;
        }

        .disclaimer-content {
            padding: 30px 20px 80px 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .disclaimer-content h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-align: center;
        }

        .disclaimer-content p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
        }

        .disclaimer-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.8em;
            cursor: pointer;
            color: #999;
            padding: 5px 10px;
        }

        .disclaimer-close:hover {
            color: #333;
        }

        .disclaimer-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .disclaimer-overlay.active {
            display: block;
        }

        /* Theme Modal */
        .theme-option {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .theme-option:hover {
            border-color: var(--accent-primary);
            background: #f9fafb;
        }

        .theme-option.selected {
            border-color: var(--accent-primary);
            background: var(--accent-bg);
        }

        .theme-preview {
            width: 80px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            overflow: hidden;
        }

        .theme-preview-color {
            flex: 1;
        }

        .theme-name {
            font-weight: 600;
            color: #333;
        }

        .hidden {
            display: none;
        }

        /* Loading Spinner */
        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0d9488;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 480px) {
            .header-left h1 {
                font-size: 1.6em;
            }

            .total-balance .amount {
                font-size: 2em;
            }

            .action-buttons {
                gap: 8px;
            }

            .action-btn {
                padding: 12px 8px;
                font-size: 0.85em;
            }

            .emoji-picker {
                grid-template-columns: repeat(6, 1fr);
            }

            .user-avatar {
                width: 32px;
                height: 32px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <h1>üí∏ IDK</h1>
        <p>A money tracker app for<br>tracking your money in an app</p>
        <button class="google-signin-btn" onclick="signInWithGoogle()">
            <svg class="google-icon" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            Sign in with Google
        </button>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="container hidden">
        <div class="header">
            <div class="header-left">
                <h1>üí∏ IDK</h1>
            </div>
            <div class="header-right">
                <button class="theme-btn" onclick="showThemeModal()" title="Change Theme">üé®</button>
                <img id="userAvatar" class="user-avatar" src="" alt="User">
                <button class="logout-btn" onclick="signOut()">Logout</button>
            </div>
        </div>

        <div class="main-content">
            <div class="total-balance">
                <h2>Total Balance</h2>
                <div class="amount" id="totalBalance">$0.00</div>
            </div>

            <div class="accounts-section">
                <h3>Money Avatars</h3>
                <div id="accountsList"></div>
                <button class="add-account-btn" onclick="showAddAccountModal()">+ Add a Money Avatar</button>
            </div>

            <div class="action-buttons">
                <button class="action-btn deposit" onclick="showTransactionModal('deposit')" id="depositBtn" disabled>
                    Stack It
                </button>
                <button class="action-btn withdraw" onclick="showTransactionModal('withdraw')" id="withdrawBtn" disabled>
                    Spend It
                </button>
                <button class="action-btn transfer" onclick="showTransferModal()" id="transferBtn" disabled>
                    Move It
                </button>
            </div>

            <div class="transactions-section">
                <h3>Recent Moves</h3>
                <div id="transactionsList"></div>
            </div>
        </div>
    </div>

    <!-- Add Money Avatar Modal -->
    <div id="addAccountModal" class="modal">
        <div class="modal-content">
            <h2>Create a Money Avatar</h2>
            <div class="form-group">
                <label>Avatar Name</label>
                <input type="text" id="newAccountName" placeholder="e.g., Cash, Savings, Spending">
            </div>
            <div class="form-group">
                <label>Pick an Emoji</label>
                <div class="emoji-picker" id="emojiPicker">
                    <button type="button" class="emoji-btn selected" data-emoji="üíµ">üíµ</button>
                    <button type="button" class="emoji-btn" data-emoji="üí∞">üí∞</button>
                    <button type="button" class="emoji-btn" data-emoji="üí∏">üí∏</button>
                    <button type="button" class="emoji-btn" data-emoji="üè¶">üè¶</button>
                    <button type="button" class="emoji-btn" data-emoji="üí≥">üí≥</button>
                    <button type="button" class="emoji-btn" data-emoji="ü™ô">ü™ô</button>
                    <button type="button" class="emoji-btn" data-emoji="üíé">üíé</button>
                    <button type="button" class="emoji-btn" data-emoji="üéØ">üéØ</button>
                    <button type="button" class="emoji-btn" data-emoji="üöÄ">üöÄ</button>
                    <button type="button" class="emoji-btn" data-emoji="‚≠ê">‚≠ê</button>
                    <button type="button" class="emoji-btn" data-emoji="üî•">üî•</button>
                    <button type="button" class="emoji-btn" data-emoji="üéÆ">üéÆ</button>
                    <button type="button" class="emoji-btn" data-emoji="üéµ">üéµ</button>
                    <button type="button" class="emoji-btn" data-emoji="üé®">üé®</button>
                    <button type="button" class="emoji-btn" data-emoji="‚ö°">‚ö°</button>
                    <button type="button" class="emoji-btn" data-emoji="üåü">üåü</button>
                </div>
                <input type="hidden" id="selectedEmoji" value="üíµ">
            </div>
            <div class="form-group">
                <label>Starting Balance</label>
                <input type="number" id="newAccountBalance" placeholder="0.00" step="0.01" value="0">
            </div>
            <div class="form-group">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="hasGoal" style="margin-right: 8px; width: auto;" onchange="toggleGoalInput()">
                    Make a Goal
                </label>
            </div>
            <div class="form-group" id="goalInputGroup" style="display: none;">
                <label>Goal Amount</label>
                <input type="number" id="newAccountGoal" placeholder="0.00" step="0.01">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('addAccountModal')">Cancel</button>
                <button class="modal-btn primary" onclick="addAccount()">Create Avatar</button>
            </div>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <h2 id="transactionModalTitle">Add a Move</h2>
            <div class="form-group">
                <label>Amount</label>
                <input type="number" id="transactionAmount" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label>Description</label>
                <input type="text" id="transactionDesc" placeholder="What's this for?">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('transactionModal')">Cancel</button>
                <button class="modal-btn primary" onclick="addTransaction()">Add</button>
            </div>
        </div>
    </div>

    <!-- Transfer Modal -->
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <h2>Move Money Around</h2>
            <div class="form-group">
                <label>From Avatar</label>
                <select id="transferFrom">
                    <option value="">Select avatar...</option>
                </select>
            </div>
            <div class="form-group">
                <label>To Avatar</label>
                <select id="transferTo">
                    <option value="">Select avatar...</option>
                </select>
            </div>
            <div class="form-group">
                <label>Amount</label>
                <input type="number" id="transferAmount" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label>Description (optional)</label>
                <input type="text" id="transferDesc" placeholder="What's this move for?">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('transferModal')">Cancel</button>
                <button class="modal-btn primary" onclick="addTransfer()">Transfer</button>
            </div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div id="goalModal" class="modal">
        <div class="modal-content">
            <h2>Set a Goal</h2>
            <div class="form-group">
                <label>Goal Amount</label>
                <input type="number" id="goalAmount" placeholder="0.00" step="0.01">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('goalModal')">Cancel</button>
                <button class="modal-btn primary" onclick="setGoal()">Set Goal</button>
            </div>
        </div>
    </div>

    <!-- Theme Modal -->
    <div id="themeModal" class="modal">
        <div class="modal-content">
            <h2>Choose Your Vibe</h2>
            <div class="theme-option" onclick="setTheme('default')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #2c5f7a"></div>
                    <div class="theme-preview-color" style="background: #0d9488"></div>
                    <div class="theme-preview-color" style="background: #f59e0b"></div>
                </div>
                <div class="theme-name">Teal & Navy (Default)</div>
            </div>
            <div class="theme-option" onclick="setTheme('classic')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #000"></div>
                    <div class="theme-preview-color" style="background: #fff; border: 1px solid #ddd;"></div>
                    <div class="theme-preview-color" style="background: #000"></div>
                </div>
                <div class="theme-name">Classic Black & White</div>
            </div>
            <div class="theme-option" onclick="setTheme('ocean')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #0c4a6e"></div>
                    <div class="theme-preview-color" style="background: #0ea5e9"></div>
                    <div class="theme-preview-color" style="background: #06b6d4"></div>
                </div>
                <div class="theme-name">Ocean Blue</div>
            </div>
            <div class="theme-option" onclick="setTheme('royal')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #1e3a8a"></div>
                    <div class="theme-preview-color" style="background: #6366f1"></div>
                    <div class="theme-preview-color" style="background: #a855f7"></div>
                </div>
                <div class="theme-name">Royal Purple & Blue</div>
            </div>
            <div class="theme-option" onclick="setTheme('purple')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #581c87"></div>
                    <div class="theme-preview-color" style="background: #a855f7"></div>
                    <div class="theme-preview-color" style="background: #ec4899"></div>
                </div>
                <div class="theme-name">Deep Purple</div>
            </div>
            <div class="theme-option" onclick="setTheme('pink')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #fce7f3"></div>
                    <div class="theme-preview-color" style="background: #ec4899"></div>
                    <div class="theme-preview-color" style="background: #fff"></div>
                </div>
                <div class="theme-name">Light Pink & White</div>
            </div>
            <div class="theme-option" onclick="setTheme('monochrome')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #000"></div>
                    <div class="theme-preview-color" style="background: #ef4444"></div>
                    <div class="theme-preview-color" style="background: #fff"></div>
                </div>
                <div class="theme-name">Black Red White</div>
            </div>
            <div class="theme-option" onclick="setTheme('forest')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #064e3b"></div>
                    <div class="theme-preview-color" style="background: #10b981"></div>
                    <div class="theme-preview-color" style="background: #fbbf24"></div>
                </div>
                <div class="theme-name">Forest Green</div>
            </div>
            <div class="theme-option" onclick="setTheme('sunset')">
                <div class="theme-preview">
                    <div class="theme-preview-color" style="background: #7c2d12"></div>
                    <div class="theme-preview-color" style="background: #f97316"></div>
                    <div class="theme-preview-color" style="background: #fbbf24"></div>
                </div>
                <div class="theme-name">Sunset Orange</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeModal('themeModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Disclaimer Overlay -->
    <div id="disclaimerOverlay" class="disclaimer-overlay" onclick="closeDisclaimer()"></div>

    <!-- Disclaimer Drawer -->
    <div id="disclaimerDrawer" class="disclaimer-drawer">
        <button class="disclaimer-close" onclick="closeDisclaimer()">√ó</button>
        <div class="disclaimer-content">
            <h3>Disclaimer</h3>
            <p>This application is provided for personal tracking purposes only and is not intended to serve as financial advice or as a substitute for professional financial planning services. IDK is not a licensed financial application and should not be treated as such.</p>
            <p>Users are solely responsible for the accuracy of data entered and any financial decisions made. Never enter real banking credentials, account numbers, or sensitive financial information into this application.</p>
            <p>Logic Nerds and its affiliates assume no liability for any losses, damages, or consequences arising from the use or misuse of this application. This software is provided "as is" without warranty of any kind, express or implied.</p>
            <p>By using this application, you acknowledge and accept full responsibility for your financial decisions and data security.</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        ¬© 2026 Logic Nerds. All Rights Reserved. | <a onclick="openDisclaimer()">Disclaimer</a>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut as firebaseSignOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, query, where, getDocs, onSnapshot, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDtBO48uBogqcdv69VO9IH7MIG8Kb1YG10",
            authDomain: "idk-money-tracker.firebaseapp.com",
            projectId: "idk-money-tracker",
            storageBucket: "idk-money-tracker.firebasestorage.app",
            messagingSenderId: "1033439716188",
            appId: "1:1033439716188:web:ebf8c149f68d3d568f9799",
            measurementId: "G-KEZSNJZ4JW"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Global variables
        let currentUser = null;
        let accounts = [];
        let transactions = [];
        let selectedAccount = null;
        let currentTransactionType = null;
        let selectedEmojiValue = 'üíµ';
        let goalAccountId = null;
        let unsubscribeAccounts = null;
        let unsubscribeTransactions = null;

        // Make functions globally available
        window.signInWithGoogle = signInWithGoogle;
        window.signOut = signOut;
        window.showAddAccountModal = showAddAccountModal;
        window.toggleGoalInput = toggleGoalInput;
        window.addAccount = addAccount;
        window.selectAccount = selectAccount;
        window.deleteAccount = deleteAccount;
        window.showGoalModal = showGoalModal;
        window.setGoal = setGoal;
        window.showTransactionModal = showTransactionModal;
        window.addTransaction = addTransaction;
        window.showTransferModal = showTransferModal;
        window.addTransfer = addTransfer;
        window.closeModal = closeModal;
        window.openDisclaimer = openDisclaimer;
        window.closeDisclaimer = closeDisclaimer;
        window.showThemeModal = showThemeModal;
        window.setTheme = setTheme;

        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                showMainApp();
                loadUserData();
            } else {
                currentUser = null;
                showLoginScreen();
            }
        });

        // Sign in with Google
        async function signInWithGoogle() {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error('Sign in error:', error);
                alert('Sign in failed. Please try again.');
            }
        }

        // Sign out
        async function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                try {
                    // Unsubscribe from listeners
                    if (unsubscribeAccounts) unsubscribeAccounts();
                    if (unsubscribeTransactions) unsubscribeTransactions();
                    
                    await firebaseSignOut(auth);
                } catch (error) {
                    console.error('Sign out error:', error);
                    alert('Sign out failed. Please try again.');
                }
            }
        }

        // Show/hide screens
        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Update user info
            if (currentUser.photoURL) {
                document.getElementById('userAvatar').src = currentUser.photoURL;
            }
        }

        // Load user data from Firestore
        function loadUserData() {
            // Listen to accounts
            const accountsQuery = query(
                collection(db, 'accounts'),
                where('userId', '==', currentUser.uid)
            );
            
            unsubscribeAccounts = onSnapshot(accountsQuery, (snapshot) => {
                accounts = [];
                snapshot.forEach((doc) => {
                    accounts.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            });

            // Listen to transactions
            const transactionsQuery = query(
                collection(db, 'transactions'),
                where('userId', '==', currentUser.uid)
            );
            
            unsubscribeTransactions = onSnapshot(transactionsQuery, (snapshot) => {
                transactions = [];
                snapshot.forEach((doc) => {
                    transactions.push({ id: doc.id, ...doc.data() });
                });
                updateUI();
            });
        }

        // Emoji picker setup
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectedEmojiValue = this.getAttribute('data-emoji');
                    document.getElementById('selectedEmoji').value = selectedEmojiValue;
                    
                    document.querySelectorAll('.emoji-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        });

        // Account management
        function showAddAccountModal() {
            document.getElementById('addAccountModal').classList.add('active');
            document.getElementById('newAccountName').value = '';
            document.getElementById('newAccountBalance').value = '0';
            document.getElementById('hasGoal').checked = false;
            document.getElementById('goalInputGroup').style.display = 'none';
            document.getElementById('newAccountGoal').value = '';
            selectedEmojiValue = 'üíµ';
            
            document.querySelectorAll('.emoji-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.querySelector('.emoji-btn').classList.add('selected');
        }

        function toggleGoalInput() {
            const checkbox = document.getElementById('hasGoal');
            const goalInput = document.getElementById('goalInputGroup');
            goalInput.style.display = checkbox.checked ? 'block' : 'none';
        }

        async function addAccount() {
            const name = document.getElementById('newAccountName').value.trim();
            const balance = parseFloat(document.getElementById('newAccountBalance').value) || 0;
            const emoji = selectedEmojiValue;
            const hasGoal = document.getElementById('hasGoal').checked;
            const goalAmount = hasGoal ? parseFloat(document.getElementById('newAccountGoal').value) : null;
            
            if (!name) {
                alert('Yo, you gotta name this avatar!');
                return;
            }

            if (hasGoal && (!goalAmount || goalAmount <= 0)) {
                alert('Put in a real goal amount!');
                return;
            }

            try {
                const accountRef = await addDoc(collection(db, 'accounts'), {
                    userId: currentUser.uid,
                    name: name,
                    emoji: emoji,
                    balance: balance,
                    goal: goalAmount,
                    createdAt: serverTimestamp()
                });

                // Add initial balance transaction if non-zero
                if (balance !== 0) {
                    await addDoc(collection(db, 'transactions'), {
                        userId: currentUser.uid,
                        accountId: accountRef.id,
                        type: 'deposit',
                        amount: balance,
                        description: 'Starting balance',
                        date: serverTimestamp()
                    });
                }
                
                closeModal('addAccountModal');
            } catch (error) {
                console.error('Error adding account:', error);
                alert('Failed to create avatar. Please try again.');
            }
        }

        function selectAccount(accountId) {
            selectedAccount = accountId;
            updateUI();
        }

        async function deleteAccount(accountId, event) {
            event.stopPropagation();
            
            const account = accounts.find(a => a.id === accountId);
            
            if (account.balance !== 0) {
                alert('This avatar gotta be at $0 before you can delete it!');
                return;
            }

            if (confirm(`Delete ${account.emoji} ${account.name}?`)) {
                try {
                    // Delete account
                    await deleteDoc(doc(db, 'accounts', accountId));
                    
                    // Delete associated transactions
                    const transactionsQuery = query(
                        collection(db, 'transactions'),
                        where('accountId', '==', accountId)
                    );
                    const transactionsSnapshot = await getDocs(transactionsQuery);
                    transactionsSnapshot.forEach(async (docSnapshot) => {
                        await deleteDoc(doc(db, 'transactions', docSnapshot.id));
                    });
                    
                    if (selectedAccount === accountId) {
                        selectedAccount = null;
                    }
                } catch (error) {
                    console.error('Error deleting account:', error);
                    alert('Failed to delete avatar. Please try again.');
                }
            }
        }

        function showGoalModal(accountId, event) {
            event.stopPropagation();
            
            goalAccountId = accountId;
            const account = accounts.find(a => a.id === accountId);
            
            document.getElementById('goalModal').classList.add('active');
            document.getElementById('goalAmount').value = account.goal || '';
        }

        async function setGoal() {
            const goalAmount = parseFloat(document.getElementById('goalAmount').value);
            
            if (!goalAmount || goalAmount <= 0) {
                alert('Put in a real goal amount!');
                return;
            }

            try {
                await updateDoc(doc(db, 'accounts', goalAccountId), {
                    goal: goalAmount
                });
                
                closeModal('goalModal');
            } catch (error) {
                console.error('Error setting goal:', error);
                alert('Failed to set goal. Please try again.');
            }
        }

        // Transaction management
        function showTransactionModal(type) {
            if (!selectedAccount) return;
            
            currentTransactionType = type;
            const modal = document.getElementById('transactionModal');
            const title = document.getElementById('transactionModalTitle');
            
            title.textContent = type === 'deposit' ? 'Stack Some Cash' : 'Spend Some Bread';
            document.getElementById('transactionAmount').value = '';
            document.getElementById('transactionDesc').value = '';
            
            modal.classList.add('active');
        }

        async function addTransaction() {
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const desc = document.getElementById('transactionDesc').value.trim();
            
            if (!amount || amount <= 0) {
                alert('Put in a real amount!');
                return;
            }

            if (!desc) {
                alert('What\'s this for tho?');
                return;
            }

            const transactionAmount = currentTransactionType === 'deposit' ? amount : -amount;

            try {
                // Add transaction
                await addDoc(collection(db, 'transactions'), {
                    userId: currentUser.uid,
                    accountId: selectedAccount,
                    type: currentTransactionType,
                    amount: transactionAmount,
                    description: desc,
                    date: serverTimestamp()
                });

                // Update account balance
                const account = accounts.find(a => a.id === selectedAccount);
                await updateDoc(doc(db, 'accounts', selectedAccount), {
                    balance: account.balance + transactionAmount
                });
                
                closeModal('transactionModal');
            } catch (error) {
                console.error('Error adding transaction:', error);
                alert('Failed to add transaction. Please try again.');
            }
        }

        async function showTransferModal() {
            if (accounts.length < 2) {
                alert('You need at least 2 avatars to move money around!');
                return;
            }

            const fromSelect = document.getElementById('transferFrom');
            const toSelect = document.getElementById('transferTo');
            
            fromSelect.innerHTML = '<option value="">Select avatar...</option>';
            toSelect.innerHTML = '<option value="">Select avatar...</option>';
            
            accounts.forEach(account => {
                fromSelect.innerHTML += `<option value="${account.id}">${account.emoji} ${account.name} ($${account.balance.toFixed(2)})</option>`;
                toSelect.innerHTML += `<option value="${account.id}">${account.emoji} ${account.name}</option>`;
            });
            
            document.getElementById('transferAmount').value = '';
            document.getElementById('transferDesc').value = '';
            document.getElementById('transferModal').classList.add('active');
        }

        async function addTransfer() {
            const fromId = document.getElementById('transferFrom').value;
            const toId = document.getElementById('transferTo').value;
            const amount = parseFloat(document.getElementById('transferAmount').value);
            const desc = document.getElementById('transferDesc').value.trim() || 'Move';
            
            if (!fromId || !toId) {
                alert('Pick both avatars, homie!');
                return;
            }
            
            if (fromId === toId) {
                alert('Bruh, you can\'t move money to the same avatar!');
                return;
            }
            
            if (!amount || amount <= 0) {
                alert('Put in a real amount!');
                return;
            }

            const fromAccount = accounts.find(a => a.id === fromId);
            const toAccount = accounts.find(a => a.id === toId);
            
            if (fromAccount.balance < amount) {
                alert('Not enough money in that avatar, chief!');
                return;
            }

            try {
                // Add withdrawal transaction
                await addDoc(collection(db, 'transactions'), {
                    userId: currentUser.uid,
                    accountId: fromId,
                    type: 'transfer_out',
                    amount: -amount,
                    description: `Moved to ${toAccount.emoji} ${toAccount.name}: ${desc}`,
                    date: serverTimestamp()
                });

                // Add deposit transaction
                await addDoc(collection(db, 'transactions'), {
                    userId: currentUser.uid,
                    accountId: toId,
                    type: 'transfer_in',
                    amount: amount,
                    description: `Moved from ${fromAccount.emoji} ${fromAccount.name}: ${desc}`,
                    date: serverTimestamp()
                });

                // Update account balances
                await updateDoc(doc(db, 'accounts', fromId), {
                    balance: fromAccount.balance - amount
                });
                
                await updateDoc(doc(db, 'accounts', toId), {
                    balance: toAccount.balance + amount
                });
                
                closeModal('transferModal');
            } catch (error) {
                console.error('Error transferring:', error);
                alert('Failed to transfer money. Please try again.');
            }
        }

        // UI updates
        function updateUI() {
            updateTotalBalance();
            updateAccountsList();
            updateTransactionsList();
            updateActionButtons();
        }

        function updateTotalBalance() {
            const total = accounts.reduce((sum, acc) => sum + acc.balance, 0);
            document.getElementById('totalBalance').textContent = '$' + total.toFixed(2);
        }

        function updateAccountsList() {
            const list = document.getElementById('accountsList');
            list.innerHTML = '';
            
            accounts.forEach(account => {
                const card = document.createElement('div');
                card.className = 'account-card' + (selectedAccount === account.id ? ' selected' : '');
                card.onclick = () => selectAccount(account.id);
                
                let bottomHTML = '';
                if (account.goal) {
                    const progress = Math.min((account.balance / account.goal) * 100, 100);
                    bottomHTML = `
                        <div class="account-bottom">
                            <div class="account-balance ${account.balance < 0 ? 'negative' : ''}">
                                $${account.balance.toFixed(2)}
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <div class="goal-display">
                                <span class="goal-emoji">üéØ</span>
                                <span class="goal-amount">$${account.goal.toFixed(2)}</span>
                            </div>
                        </div>
                    `;
                } else {
                    bottomHTML = `
                        <div class="account-bottom">
                            <div class="account-balance ${account.balance < 0 ? 'negative' : ''}">
                                $${account.balance.toFixed(2)}
                            </div>
                        </div>
                    `;
                }
                
                card.innerHTML = `
                    <div class="account-header">
                        <div class="account-info">
                            <h4>${account.emoji} ${account.name}</h4>
                        </div>
                        <div class="account-actions">
                            <button class="icon-btn goal-btn" onclick="showGoalModal('${account.id}', event)" title="Set Goal">üéØ</button>
                            <button class="icon-btn delete-btn" onclick="deleteAccount('${account.id}', event)" title="Delete">üóëÔ∏è</button>
                        </div>
                    </div>
                    ${bottomHTML}
                `;
                
                list.appendChild(card);
            });
        }

        function updateTransactionsList() {
            const list = document.getElementById('transactionsList');
            
            if (!selectedAccount) {
                list.innerHTML = '<div class="no-transactions">Pick an avatar to see the moves</div>';
                return;
            }

            const accountTransactions = transactions
                .filter(t => t.accountId === selectedAccount)
                .sort((a, b) => {
                    const aDate = a.date?.toDate ? a.date.toDate() : new Date(a.date);
                    const bDate = b.date?.toDate ? b.date.toDate() : new Date(b.date);
                    return bDate - aDate;
                })
                .slice(0, 10);
            
            if (accountTransactions.length === 0) {
                list.innerHTML = '<div class="no-transactions">No moves yet, go make some!</div>';
                return;
            }

            list.innerHTML = '';
            accountTransactions.forEach(transaction => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                
                const typeLabel = transaction.type === 'deposit' ? 'Money In' : 
                                 transaction.type === 'withdraw' ? 'Money Out' :
                                 transaction.type === 'transfer_in' ? 'Moved In' : 
                                 transaction.type === 'transfer_out' ? 'Moved Out' : 'Money Out';
                
                const date = transaction.date?.toDate ? transaction.date.toDate() : new Date(transaction.date);
                const dateStr = date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                item.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-type">${typeLabel}</div>
                        <div class="transaction-desc">${transaction.description}</div>
                        <div class="transaction-date">${dateStr}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount >= 0 ? 'positive' : 'negative'}">
                        ${transaction.amount >= 0 ? '+' : ''}$${Math.abs(transaction.amount).toFixed(2)}
                    </div>
                `;
                
                list.appendChild(item);
            });
        }

        function updateActionButtons() {
            const hasAccount = selectedAccount !== null;
            document.getElementById('depositBtn').disabled = !hasAccount;
            document.getElementById('withdrawBtn').disabled = !hasAccount;
            document.getElementById('transferBtn').disabled = accounts.length < 2;
        }

        // Utility functions
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Disclaimer drawer functions
        function openDisclaimer() {
            document.getElementById('disclaimerDrawer').classList.add('open');
            document.getElementById('disclaimerOverlay').classList.add('active');
        }

        function closeDisclaimer() {
            document.getElementById('disclaimerDrawer').classList.remove('open');
            document.getElementById('disclaimerOverlay').classList.remove('active');
        }

        // Theme management
        const themes = {
            default: {
                primaryStart: '#2c5f7a',
                primaryEnd: '#1a3a4a',
                accentPrimary: '#0d9488',
                accentSecondary: '#0f766e',
                accentBg: '#f0fdfa',
                balanceStart: '#0d9488',
                balanceEnd: '#0f766e',
                buttonDepositStart: '#0d9488',
                buttonDepositEnd: '#0f766e',
                buttonWithdrawStart: '#f59e0b',
                buttonWithdrawEnd: '#d97706',
                buttonTransferStart: '#6366f1',
                buttonTransferEnd: '#4f46e5'
            },
            classic: {
                primaryStart: '#000000',
                primaryEnd: '#000000',
                accentPrimary: '#000000',
                accentSecondary: '#000000',
                accentBg: '#ffffff',
                balanceStart: '#000000',
                balanceEnd: '#000000',
                buttonDepositStart: '#000000',
                buttonDepositEnd: '#000000',
                buttonWithdrawStart: '#000000',
                buttonWithdrawEnd: '#000000',
                buttonTransferStart: '#000000',
                buttonTransferEnd: '#000000'
            },
            monochrome: {
                primaryStart: '#000000',
                primaryEnd: '#1a1a1a',
                accentPrimary: '#ef4444',
                accentSecondary: '#dc2626',
                accentBg: '#fee2e2',
                balanceStart: '#000000',
                balanceEnd: '#1a1a1a',
                buttonDepositStart: '#ef4444',
                buttonDepositEnd: '#dc2626',
                buttonWithdrawStart: '#6b7280',
                buttonWithdrawEnd: '#4b5563',
                buttonTransferStart: '#ffffff',
                buttonTransferEnd: '#ffffff'
            },
            pink: {
                primaryStart: '#fce7f3',
                primaryEnd: '#fbcfe8',
                accentPrimary: '#ec4899',
                accentSecondary: '#db2777',
                accentBg: '#fce7f3',
                balanceStart: '#fce7f3',
                balanceEnd: '#fbcfe8',
                buttonDepositStart: '#ec4899',
                buttonDepositEnd: '#db2777',
                buttonWithdrawStart: '#a855f7',
                buttonWithdrawEnd: '#9333ea',
                buttonTransferStart: '#f472b6',
                buttonTransferEnd: '#ec4899'
            },
            purple: {
                primaryStart: '#581c87',
                primaryEnd: '#3b0764',
                accentPrimary: '#a855f7',
                accentSecondary: '#9333ea',
                accentBg: '#f3e8ff',
                balanceStart: '#a855f7',
                balanceEnd: '#9333ea',
                buttonDepositStart: '#a855f7',
                buttonDepositEnd: '#9333ea',
                buttonWithdrawStart: '#ec4899',
                buttonWithdrawEnd: '#db2777',
                buttonTransferStart: '#8b5cf6',
                buttonTransferEnd: '#7c3aed'
            },
            ocean: {
                primaryStart: '#0c4a6e',
                primaryEnd: '#082f49',
                accentPrimary: '#0ea5e9',
                accentSecondary: '#0284c7',
                accentBg: '#e0f2fe',
                balanceStart: '#0ea5e9',
                balanceEnd: '#0284c7',
                buttonDepositStart: '#0ea5e9',
                buttonDepositEnd: '#0284c7',
                buttonWithdrawStart: '#06b6d4',
                buttonWithdrawEnd: '#0891b2',
                buttonTransferStart: '#6366f1',
                buttonTransferEnd: '#4f46e5'
            },
            royal: {
                primaryStart: '#1e3a8a',
                primaryEnd: '#1e1b4b',
                accentPrimary: '#6366f1',
                accentSecondary: '#4f46e5',
                accentBg: '#e0e7ff',
                balanceStart: '#6366f1',
                balanceEnd: '#4f46e5',
                buttonDepositStart: '#6366f1',
                buttonDepositEnd: '#4f46e5',
                buttonWithdrawStart: '#a855f7',
                buttonWithdrawEnd: '#9333ea',
                buttonTransferStart: '#8b5cf6',
                buttonTransferEnd: '#7c3aed'
            },
            forest: {
                primaryStart: '#064e3b',
                primaryEnd: '#022c22',
                accentPrimary: '#10b981',
                accentSecondary: '#059669',
                accentBg: '#d1fae5',
                balanceStart: '#10b981',
                balanceEnd: '#059669',
                buttonDepositStart: '#10b981',
                buttonDepositEnd: '#059669',
                buttonWithdrawStart: '#fbbf24',
                buttonWithdrawEnd: '#f59e0b',
                buttonTransferStart: '#6366f1',
                buttonTransferEnd: '#4f46e5'
            },
            sunset: {
                primaryStart: '#7c2d12',
                primaryEnd: '#431407',
                accentPrimary: '#f97316',
                accentSecondary: '#ea580c',
                accentBg: '#ffedd5',
                balanceStart: '#f97316',
                balanceEnd: '#ea580c',
                buttonDepositStart: '#f97316',
                buttonDepositEnd: '#ea580c',
                buttonWithdrawStart: '#fbbf24',
                buttonWithdrawEnd: '#f59e0b',
                buttonTransferStart: '#ef4444',
                buttonTransferEnd: '#dc2626'
            }
        };

        function showThemeModal() {
            document.getElementById('themeModal').classList.add('active');
        }

        function setTheme(themeName) {
            const theme = themes[themeName];
            if (!theme) return;

            const root = document.documentElement;
            root.style.setProperty('--primary-start', theme.primaryStart);
            root.style.setProperty('--primary-end', theme.primaryEnd);
            root.style.setProperty('--accent-primary', theme.accentPrimary);
            root.style.setProperty('--accent-secondary', theme.accentSecondary);
            root.style.setProperty('--accent-bg', theme.accentBg);
            root.style.setProperty('--balance-start', theme.balanceStart);
            root.style.setProperty('--balance-end', theme.balanceEnd);
            root.style.setProperty('--button-deposit-start', theme.buttonDepositStart);
            root.style.setProperty('--button-deposit-end', theme.buttonDepositEnd);
            root.style.setProperty('--button-withdraw-start', theme.buttonWithdrawStart);
            root.style.setProperty('--button-withdraw-end', theme.buttonWithdrawEnd);
            root.style.setProperty('--button-transfer-start', theme.buttonTransferStart);
            root.style.setProperty('--button-transfer-end', theme.buttonTransferEnd);

            // Set theme data attribute for special styling
            document.body.setAttribute('data-theme', themeName);

            // Save theme preference
            localStorage.setItem('idkTheme', themeName);
            
            closeModal('themeModal');
        }

        // Load saved theme on startup
        window.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('idkTheme') || 'default';
            if (savedTheme && themes[savedTheme]) {
                setTheme(savedTheme);
            }
        });
    </script>
</body>
</html>
